# è®­ç»ƒ/æµ‹è¯•æ¨¡å¼ä½¿ç”¨è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æ¡†æ¶ç°åœ¨æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š
- **è®­ç»ƒæ¨¡å¼ (train)**: ä»ç§å­å‡½æ•°ç”Ÿæˆåˆå§‹ç§ç¾¤ï¼Œæ‰§è¡Œå¤šè½®è¿­ä»£è¿›åŒ–
- **æµ‹è¯•æ¨¡å¼ (test)**: ä»`data/`ç›®å½•åŠ è½½è®­ç»ƒå¥½çš„è§„åˆ™ï¼Œæ‰§è¡Œå•æ¬¡è¿­ä»£

---

## ğŸ”§ é…ç½®æ–¹å¼

### 1. ä¿®æ”¹é…ç½®æ–‡ä»¶ `cfg/config.yaml`

```yaml
# Execution mode
mode: train  # ä¿®æ”¹ä¸º "train" æˆ– "test"
data_dir: data  # æµ‹è¯•æ¨¡å¼ä¸‹åŠ è½½è§„åˆ™çš„ç›®å½•
```

### 2. è¾“å‡ºç›®å½•è‡ªåŠ¨åˆ†ç¦»

- **è®­ç»ƒæ¨¡å¼è¾“å‡º**: `outputs/train/main/2025-12-30_19-08-27/`
- **æµ‹è¯•æ¨¡å¼è¾“å‡º**: `outputs/test/main/2025-12-30_19-08-27/`

---

## ğŸ“‚ æ•°æ®é›†è¯´æ˜

### è®­ç»ƒä¸æµ‹è¯•ä½¿ç”¨ä¸åŒçš„æ•°æ®é›†

#### **è®­ç»ƒæ•°æ®é›†**
```
problems/jsp_constructive/test_data/
â”œâ”€â”€ jsp_cases/          # è®­ç»ƒç”¨è®¡åˆ’æ•°æ®
â”‚   â”œâ”€â”€ prob_00.pkl
â”‚   â”œâ”€â”€ prob_01.pkl
â”‚   â””â”€â”€ ...
â””â”€â”€ real_jsp_cases/     # è®­ç»ƒç”¨å®é™…æ•°æ®
    â”œâ”€â”€ prob_00_real.pkl
    â”œâ”€â”€ prob_01_real.pkl
    â””â”€â”€ ...
```

#### **æµ‹è¯•æ•°æ®é›†**
```
problems/jsp_constructive/test_data/
â”œâ”€â”€ test_jsp/           # æµ‹è¯•ç”¨è®¡åˆ’æ•°æ®
â”‚   â”œâ”€â”€ prob_00.pkl
â”‚   â”œâ”€â”€ prob_01.pkl
â”‚   â””â”€â”€ ...
â””â”€â”€ real_test_jsp/      # æµ‹è¯•ç”¨å®é™…æ•°æ®
    â”œâ”€â”€ prob_00.pkl     # æ³¨æ„ï¼šæµ‹è¯•æ•°æ®æ²¡æœ‰ _real åç¼€
    â”œâ”€â”€ prob_01.pkl
    â””â”€â”€ ...
```

**âš ï¸ æ–‡ä»¶å‘½åå·®å¼‚**ï¼š
- è®­ç»ƒæ•°æ®é›†ï¼š`prob_XX.pkl` + `prob_XX_real.pkl`
- æµ‹è¯•æ•°æ®é›†ï¼š`prob_XX.pkl` + `prob_XX.pkl` (æ—  `_real` åç¼€)

### æµ‹è¯•æ¨¡å¼åˆå§‹ç§ç¾¤å‡†å¤‡

```
data/
â”œâ”€â”€ 2025-05-04_15-02-19/
â”‚   â””â”€â”€ problem_iter18_response7.txt
â”œâ”€â”€ 2025-05-04_15-10-13/
â”‚   â””â”€â”€ problem_iter15_response3.txt
â”œâ”€â”€ ...
â””â”€â”€ 2025-05-04_17-28-29/
    â””â”€â”€ problem_iter12_response11.txt
```

- æ¯ä¸ªå­ç›®å½•åŒ…å«1ä¸ª`.txt`æ–‡ä»¶ï¼ˆè®­ç»ƒå¥½çš„è§„åˆ™ï¼‰
- ç³»ç»Ÿä¼šè‡ªåŠ¨åŠ è½½æ‰€æœ‰å­ç›®å½•ä¸­çš„`.txt`æ–‡ä»¶ä½œä¸ºåˆå§‹ç§ç¾¤

---

## ğŸš€ è¿è¡Œæ–¹å¼

### è®­ç»ƒæ¨¡å¼

```bash
# cfg/config.yaml ä¸­è®¾ç½® mode: train
python main.py
```

**æ‰§è¡Œæµç¨‹**:
1. ä»ç§å­å‡½æ•°ç”Ÿæˆåˆå§‹ç§ç¾¤
2. å¾ªç¯æ‰§è¡Œç›´åˆ°è¾¾åˆ° `max_fe` æ¬¡è¿­ä»£
3. æ¯æ¬¡è¿­ä»£åŒ…æ‹¬ï¼š
   - Selection â†’ Population inter-evolution
   - Individual self-evolution (ä»… SeEvo)
   - Long-term reflection â†’ Mutation

### æµ‹è¯•æ¨¡å¼

```bash
# cfg/config.yaml ä¸­è®¾ç½® mode: test
python main.py
```

**æ‰§è¡Œæµç¨‹**:
1. ä» `data/` ç›®å½•åŠ è½½20ä¸ªè®­ç»ƒå¥½çš„è§„åˆ™
2. æ‰§è¡Œ**å•æ¬¡è¿­ä»£**ï¼š
   - Selection â†’ Population inter-evolution
   - âœ… **å®Œæˆï¼** (ä¸æ‰§è¡Œä¸ªä½“è‡ªè¿›åŒ–ã€é•¿æœŸåæ€å’Œå˜å¼‚)
3. è¾“å‡ºæœ€ä¼˜ç»“æœåˆ° `outputs/test/`

---

## ğŸ†š SeEvo vs ReEvo å·®å¼‚

### SeEvo (å®Œæ•´ç‰ˆ)

**è®­ç»ƒæ¨¡å¼**:
- âœ… ç§ç¾¤é—´è¿›åŒ– (Population inter-evolution)
- âœ… ä¸ªä½“è‡ªè¿›åŒ– (Individual self-evolution)
- âœ… é•¿æœŸåæ€ (Long-term reflection)
- âœ… å˜å¼‚ (Mutation)

**æµ‹è¯•æ¨¡å¼**:
- âœ… ç§ç¾¤é—´è¿›åŒ–
- âŒ ä¸ªä½“è‡ªè¿›åŒ– (è·³è¿‡)
- âŒ é•¿æœŸåæ€ (è·³è¿‡)
- âŒ å˜å¼‚ (è·³è¿‡)

### ReEvo (åŸºçº¿)

**è®­ç»ƒæ¨¡å¼**:
- âœ… ç§ç¾¤é—´è¿›åŒ–
- âŒ ä¸ªä½“è‡ªè¿›åŒ– (æ— æ­¤æ­¥éª¤)
- âœ… é•¿æœŸåæ€
- âœ… å˜å¼‚

**æµ‹è¯•æ¨¡å¼**:
- âœ… ç§ç¾¤é—´è¿›åŒ–
- âŒ é•¿æœŸåæ€ (è·³è¿‡)
- âŒ å˜å¼‚ (è·³è¿‡)

---

## åŠŸèƒ½å¯¹æ¯”è¡¨

| åŠŸèƒ½ | è®­ç»ƒæ¨¡å¼ (SeEvo) | æµ‹è¯•æ¨¡å¼ (SeEvo) | è®­ç»ƒæ¨¡å¼ (ReEvo) | æµ‹è¯•æ¨¡å¼ (ReEvo) |
|------|-----------------|-----------------|-----------------|-----------------|
| åŠ è½½æ–¹å¼ | ç§å­å‡½æ•° + LLMç”Ÿæˆ | ä»`data/`åŠ è½½ | ç§å­å‡½æ•° + LLMç”Ÿæˆ | ä»`data/`åŠ è½½ |
| æ•°æ®é›† | `jsp_cases` + `real_jsp_cases` | `test_jsp` + `real_test_jsp` | `jsp_cases` + `real_jsp_cases` | `test_jsp` + `real_test_jsp` |
| è¿­ä»£æ¬¡æ•° | `max_fe` æ¬¡ | 1æ¬¡ | `max_fe` æ¬¡ | 1æ¬¡ |
| æ€§èƒ½è¿½è¸ª | âœ… | âŒ | âœ… | âŒ |
| EMAç»Ÿè®¡ | âœ… | âŒ | âœ… | âŒ |
| ç§ç¾¤é—´è¿›åŒ– | âœ… | âœ… | âœ… | âœ… |
| ä¸ªä½“è‡ªè¿›åŒ– | âœ… | âŒ | âŒ | âŒ |
| é•¿æœŸåæ€ | âœ… | âŒ | âœ… | âŒ |
| å˜å¼‚ | âœ… | âŒ | âœ… | âŒ |

---

## ğŸ¯ å…¸å‹ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: è®­ç»ƒæ–°è§„åˆ™

```yaml
# cfg/config.yaml
mode: train
max_fe: 20
algorithm: seevo
```

è¿è¡Œååœ¨ `outputs/train/main/` ä¸­è·å¾—æœ€ä¼˜è§„åˆ™ã€‚

### åœºæ™¯2: æµ‹è¯•è®­ç»ƒå¥½çš„è§„åˆ™

1. å°†è®­ç»ƒå¥½çš„è§„åˆ™å¤åˆ¶åˆ° `data/` ç›®å½•
2. ä¿®æ”¹é…ç½®:
   ```yaml
   mode: test
   data_dir: data
   algorithm: seevo
   ```
3. è¿è¡Œååœ¨ `outputs/test/main/` ä¸­æŸ¥çœ‹æµ‹è¯•ç»“æœ

### åœºæ™¯3: å¯¹æ¯”SeEvoå’ŒReEvo

**è®­ç»ƒSeEvo**:
```yaml
mode: train
algorithm: seevo
```

**è®­ç»ƒReEvo**:
```yaml
mode: train
algorithm: reevo
```

**æµ‹è¯•å¯¹æ¯”**:
```yaml
mode: test
algorithm: seevo  # æˆ– reevo
```

---

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

### æ€§èƒ½è¿½è¸ª (ä»…è®­ç»ƒæ¨¡å¼)

- `improvement_history`: æ¯æ¬¡è¿­ä»£çš„æ”¹è¿›é‡
- `best_obj_history`: æ¯æ¬¡è¿­ä»£çš„æœ€ä¼˜ç›®æ ‡å€¼
- ç”¨äºç”Ÿæˆè¿›åŒ–è¶‹åŠ¿æ‘˜è¦å’ŒæŒ‡å¯¼LLMåæ€

### EMAä¿¡æ¯ (ä»…è®­ç»ƒæ¨¡å¼)

- ä»è¯„ä¼°è¾“å‡ºä¸­æå–EMAå€¼
- åœ¨åæ€æ—¶æä¾›ä¸ç¡®å®šæ€§é€‚åº”åˆ†æ
- æŒ‡å¯¼LLMç”Ÿæˆæ›´é²æ£’çš„HDR

### æµ‹è¯•æ¨¡å¼ä¼˜åŒ–

- è·³è¿‡æ€§èƒ½å†å²è®°å½•ï¼ˆèŠ‚çœå†…å­˜ï¼‰
- è·³è¿‡é•¿æœŸåæ€å’Œå˜å¼‚ï¼ˆèŠ‚çœLLMè°ƒç”¨ï¼‰
- åªæ‰§è¡Œæ ¸å¿ƒçš„ç§ç¾¤é—´è¿›åŒ–ï¼ˆå¿«é€ŸéªŒè¯ï¼‰

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **dataç›®å½•ç»“æ„**: ç¡®ä¿æ¯ä¸ªå­ç›®å½•åªæœ‰ä¸€ä¸ª`.txt`æ–‡ä»¶
2. **è§„åˆ™æ•°é‡**: å»ºè®®å‡†å¤‡20ä¸ªè®­ç»ƒå¥½çš„è§„åˆ™ï¼ˆä¸`pop_size`åŒ¹é…ï¼‰
3. **è¾“å‡ºè·¯å¾„**: æµ‹è¯•å’Œè®­ç»ƒçš„è¾“å‡ºä¼šè‡ªåŠ¨åˆ†ç¦»ï¼Œä¸ä¼šäº’ç›¸è¦†ç›–
4. **APIå¯†é’¥**: æµ‹è¯•æ¨¡å¼ä»éœ€è¦APIå¯†é’¥ï¼ˆè¿›è¡Œç§ç¾¤é—´è¿›åŒ–æ—¶éœ€è¦LLMåæ€ï¼‰

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æ£€æŸ¥åŠ è½½çš„è§„åˆ™æ•°é‡

```bash
# æ—¥å¿—ä¸­ä¼šæ˜¾ç¤º:
[INFO] Loaded 20 trained rules
```

### ç¡®è®¤æ¨¡å¼

```bash
# æ—¥å¿—å¼€å¤´ä¼šæ˜¾ç¤º:
[INFO] Using Algorithm: seevo
[INFO] Test mode: Loading trained rules from data...
# æˆ–
[INFO] Train mode: Evaluating seed function...
```

### éªŒè¯æ•°æ®é›†è·¯å¾„

```bash
# eval.py æ—¥å¿—ä¸­ä¼šæ˜¾ç¤º:
[*] Using TRAIN dataset: .../test_data/jsp_cases
# æˆ–
[*] Using TEST dataset: .../test_data/test_jsp
```

### éªŒè¯è¾“å‡ºç›®å½•

```bash
ls outputs/train/main/  # è®­ç»ƒç»“æœ
ls outputs/test/main/   # æµ‹è¯•ç»“æœ
```

---

## ğŸ‰ å®Œæˆï¼

ç°åœ¨ä½ å¯ä»¥çµæ´»åˆ‡æ¢è®­ç»ƒå’Œæµ‹è¯•æ¨¡å¼ï¼Œæ–¹ä¾¿åœ°éªŒè¯å’Œå¯¹æ¯”ä¸åŒç®—æ³•çš„æ€§èƒ½ï¼
